{
  "task_id": "film_inventory_management",
  "task_name": "Film Inventory Management",
  "category_id": "dvdrental",
  "category_name": "DVD Rental",
  "description": "Manage film inventory through multiple operations including adding films, updating records, and cleaning old data.",
  "author": "Lingxiao Du",
  "created_at": "2025-08-20",
  "difficulty": "L3",
  "tags": [
    "data migration",
    "transactional operations",
    "schema design"
  ],
  "mcp": [
    "postgres"
  ],
  "meta_data": {
    "stateType": "text",
    "stateContent": "Enum \"mpaa_rating\" {\n  \"G\"\n  \"PG\"\n  \"PG-13\"\n  \"R\"\n  \"NC-17\"\n}\n\nTable \"customer\" {\n  \"customer_id\" int4 [pk, not null, increment]\n  \"store_id\" int2 [not null]\n  \"first_name\" varchar(45) [not null]\n  \"last_name\" varchar(45) [not null]\n  \"email\" varchar(50)\n  \"address_id\" int2 [not null]\n  \"activebool\" bool [not null, default: true]\n  \"create_date\" date [not null, default: `('now'::text)::date`]\n  \"last_update\" timestamp [default: `now()`]\n  \"active\" int4\n\n  Indexes {\n    address_id [type: btree, name: \"idx_fk_address_id\"]\n    store_id [type: btree, name: \"idx_fk_store_id\"]\n    last_name [type: btree, name: \"idx_last_name\"]\n  }\n}\n\nTable \"actor\" {\n  \"actor_id\" int4 [pk, not null, increment]\n  \"first_name\" varchar(45) [not null]\n  \"last_name\" varchar(45) [not null]\n  \"last_update\" timestamp [not null, default: `now()`]\n\n  Indexes {\n    last_name [type: btree, name: \"idx_actor_last_name\"]\n  }\n}\n\nTable \"category\" {\n  \"category_id\" int4 [pk, not null, increment]\n  \"name\" varchar(25) [not null]\n  \"last_update\" timestamp [not null, default: `now()`]\n}\n\nTable \"film\" {\n  \"film_id\" int4 [pk, not null, increment]\n  \"title\" varchar(255) [not null]\n  \"description\" text\n  \"release_year\" int4\n  \"language_id\" int2 [not null]\n  \"rental_duration\" int2 [not null, default: 3]\n  \"rental_rate\" numeric(4,2) [not null, default: 4.99]\n  \"length\" int2\n  \"replacement_cost\" numeric(5,2) [not null, default: 19.99]\n  \"rating\" mpaa_rating [default: 'G']\n  \"last_update\" timestamp [not null, default: `now()`]\n  \"special_features\" \"text[]\"\n  \"fulltext\" tsvector [not null]\n\n  Indexes {\n    fulltext [type: gist, name: \"film_fulltext_idx\"]\n    language_id [type: btree, name: \"idx_fk_language_id\"]\n    title [type: btree, name: \"idx_title\"]\n  }\n}\n\nTable \"film_actor\" {\n  \"actor_id\" int2 [not null]\n  \"film_id\" int2 [not null]\n  \"last_update\" timestamp [not null, default: `now()`]\n\n  Indexes {\n    (actor_id, film_id) [type: btree, name: \"film_actor_pkey\"]\n    film_id [type: btree, name: \"idx_fk_film_id\"]\n  }\n}\n\nTable \"film_category\" {\n  \"film_id\" int2 [not null]\n  \"category_id\" int2 [not null]\n  \"last_update\" timestamp [not null, default: `now()`]\n\n  Indexes {\n    (film_id, category_id) [type: btree, name: \"film_category_pkey\"]\n  }\n}\n\nTable \"address\" {\n  \"address_id\" int4 [pk, not null, increment]\n  \"address\" varchar(50) [not null]\n  \"address2\" varchar(50)\n  \"district\" varchar(20) [not null]\n  \"city_id\" int2 [not null]\n  \"postal_code\" varchar(10)\n  \"phone\" varchar(20) [not null]\n  \"last_update\" timestamp [not null, default: `now()`]\n\n  Indexes {\n    city_id [type: btree, name: \"idx_fk_city_id\"]\n  }\n}\n\nTable \"city\" {\n  \"city_id\" int4 [pk, not null, increment]\n  \"city\" varchar(50) [not null]\n  \"country_id\" int2 [not null]\n  \"last_update\" timestamp [not null, default: `now()`]\n\n  Indexes {\n    country_id [type: btree, name: \"idx_fk_country_id\"]\n  }\n}\n\nTable \"country\" {\n  \"country_id\" int4 [pk, not null, increment]\n  \"country\" varchar(50) [not null]\n  \"last_update\" timestamp [not null, default: `now()`]\n}\n\nTable \"inventory\" {\n  \"inventory_id\" int4 [pk, not null, increment]\n  \"film_id\" int2 [not null]\n  \"store_id\" int2 [not null]\n  \"last_update\" timestamp [not null, default: `now()`]\n\n  Indexes {\n    (store_id, film_id) [type: btree, name: \"idx_store_id_film_id\"]\n  }\n}\n\nTable \"language\" {\n  \"language_id\" int4 [pk, not null, increment]\n  \"name\" bpchar(20) [not null]\n  \"last_update\" timestamp [not null, default: `now()`]\n}\n\nTable \"payment\" {\n  \"payment_id\" int4 [pk, not null, increment]\n  \"customer_id\" int2 [not null]\n  \"staff_id\" int2 [not null]\n  \"rental_id\" int4 [not null]\n  \"amount\" numeric(5,2) [not null]\n  \"payment_date\" timestamp [not null]\n\n  Indexes {\n    rental_id [type: btree, name: \"idx_fk_rental_id\"]\n    staff_id [type: btree, name: \"idx_fk_staff_id\"]\n  }\n}\n\nTable \"rental\" {\n  \"rental_id\" int4 [pk, not null, increment]\n  \"rental_date\" timestamp [not null]\n  \"inventory_id\" int4 [not null]\n  \"customer_id\" int2 [not null]\n  \"return_date\" timestamp\n  \"staff_id\" int2 [not null]\n  \"last_update\" timestamp [not null, default: `now()`]\n\n  Indexes {\n    (rental_date, inventory_id, customer_id) [type: btree, name: \"idx_unq_rental_rental_date_inventory_id_customer_id\"]\n    inventory_id [type: btree, name: \"idx_fk_inventory_id\"]\n  }\n}\n\nTable \"staff\" {\n  \"staff_id\" int4 [pk, not null, increment]\n  \"first_name\" varchar(45) [not null]\n  \"last_name\" varchar(45) [not null]\n  \"address_id\" int2 [not null]\n  \"email\" varchar(50)\n  \"store_id\" int2 [not null]\n  \"active\" bool [not null, default: true]\n  \"username\" varchar(16) [not null]\n  \"password\" varchar(40)\n  \"last_update\" timestamp [not null, default: `now()`]\n  \"picture\" bytea\n}\n\nTable \"store\" {\n  \"store_id\" int4 [pk, not null, increment]\n  \"manager_staff_id\" int2 [unique, not null]\n  \"address_id\" int2 [not null]\n  \"last_update\" timestamp [not null, default: `now()`]\n}\n\nRef \"fk_address_city\":\"city\".\"city_id\" < \"address\".\"city_id\"\n\nRef \"fk_city\":\"country\".\"country_id\" < \"city\".\"country_id\"\n\nRef \"customer_address_id_fkey\":\"address\".\"address_id\" < \"customer\".\"address_id\" [update: cascade, delete: restrict]\n\nRef \"film_language_id_fkey\":\"language\".\"language_id\" < \"film\".\"language_id\" [update: cascade, delete: restrict]\n\nRef \"film_actor_actor_id_fkey\":\"actor\".\"actor_id\" < \"film_actor\".\"actor_id\" [update: cascade, delete: restrict]\n\nRef \"film_actor_film_id_fkey\":\"film\".\"film_id\" < \"film_actor\".\"film_id\" [update: cascade, delete: restrict]\n\nRef \"film_category_category_id_fkey\":\"category\".\"category_id\" < \"film_category\".\"category_id\" [update: cascade, delete: restrict]\n\nRef \"film_category_film_id_fkey\":\"film\".\"film_id\" < \"film_category\".\"film_id\" [update: cascade, delete: restrict]\n\nRef \"inventory_film_id_fkey\":\"film\".\"film_id\" < \"inventory\".\"film_id\" [update: cascade, delete: restrict]\n\nRef \"payment_customer_id_fkey\":\"customer\".\"customer_id\" < \"payment\".\"customer_id\" [update: cascade, delete: restrict]\n\nRef \"payment_rental_id_fkey\":\"rental\".\"rental_id\" < \"payment\".\"rental_id\" [update: cascade, delete: set null]\n\nRef \"payment_staff_id_fkey\":\"staff\".\"staff_id\" < \"payment\".\"staff_id\" [update: cascade, delete: restrict]\n\nRef \"rental_customer_id_fkey\":\"customer\".\"customer_id\" < \"rental\".\"customer_id\" [update: cascade, delete: restrict]\n\nRef \"rental_inventory_id_fkey\":\"inventory\".\"inventory_id\" < \"rental\".\"inventory_id\" [update: cascade, delete: restrict]\n\nRef \"rental_staff_id_key\":\"staff\".\"staff_id\" < \"rental\".\"staff_id\"\n\nRef \"staff_address_id_fkey\":\"address\".\"address_id\" < \"staff\".\"address_id\" [update: cascade, delete: restrict]\n\nRef \"store_address_id_fkey\":\"address\".\"address_id\" < \"store\".\"address_id\" [update: cascade, delete: restrict]\n\nRef \"store_manager_staff_id_fkey\":\"staff\".\"staff_id\" < \"store\".\"manager_staff_id\" [update: cascade, delete: restrict]\n",
    "stateUrl": null,
    "stateOriginalUrl": "https://github.com/gordonkwokkwok/DVD-Rental-PostgreSQL-Project"
  }
}